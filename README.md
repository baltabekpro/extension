# AI Text Corrector — расширение для Chrome

Исправляет выделенный текст с помощью ИИ (Gemini) по горячей клавише, без лишних пояснений — только результат.

## Установка (из архива)

1) Скачайте репозиторий как архив ZIP:
	 - Откройте страницу репозитория и выберите «Code» → «Download ZIP».
2) Распакуйте архив в удобную папку (важно, чтобы внутри лежали файлы `manifest.json`, `background.js`, `content.js`, `popup.html`, `popup.js`).
3) Откройте страницу расширений Chrome:
	 - В адресной строке введите `chrome://extensions/` и нажмите Enter.
4) Включите «Режим разработчика» (Developer mode) в правом верхнем углу.
5) Нажмите «Загрузить распакованное» (Load unpacked) и укажите папку с распакованным расширением.

После загрузки иконка расширения появится на панели расширений. Можно закрепить её через меню «Пазл».

## Как пользоваться

- На любой странице выделите текст (в том числе в `input`, `textarea` или `contentEditable`).
- Нажмите Ctrl + Shift + F.
- Расширение отправит выделенный фрагмент в ИИ и заменит его на исправленную версию. Возвращается только исправленный текст — без комментариев.

Подсказки:
- Для системных страниц Chrome (`chrome://*`) расширения не работают — используйте обычные сайты.
- Горячую клавишу можно поменять в `chrome://extensions/shortcuts`.

## Настройка API‑ключа Gemini

Расширение не содержит ключей в репозитории. Вам нужно добавить свой ключ Gemini:

1) Получите ключ Gemini API:
	- Перейдите на https://ai.google.dev/ и авторизуйтесь.
	- Откройте раздел Keys/API access и создайте новый API‑ключ.
2) Добавьте ключ в расширение (вариант для не‑техничных пользователей):
	 - Откройте popup расширения (иконка на панели) → В разделе «API ключи Gemini» вставьте ключ в поле → «Добавить» → «Сохранить ключи».
	 - Можно добавить несколько ключей, они будут использоваться по очереди.

	 Альтернативный вариант (через файл):
	 - В корне папки расширения находится `config.json`. Откройте и вставьте ключ:
		 ```json
		 { "apiKeys": ["ВАШ_GEMINI_API_KEY"] }
		 ```
		 Можно указать несколько: `{ "apiKeys": ["KEY_1", "KEY_2"] }`.
	 - Перезагрузите расширение на странице `chrome://extensions/`.

После этого горячая клавиша начнёт работать. Если ключи не заданы, расширение покажет уведомление на странице.

## Что под капотом

- Manifest V3, сервис-воркер `background.js` и контент-скрипт `content.js`.
- Вызов Gemini API с ротацией ключей (из chrome.storage): автоматически переключается на следующий ключ при 429/403.
- Всплывающие уведомления на странице и счётчики запросов в popup.

## Требуемые разрешения

- `activeTab` — доступ к активной вкладке для работы с выделением.
- `scripting` — взаимодействие с DOM через контент-скрипт.
- `storage` — хранение счётчиков и индекса текущего ключа.
- `host_permissions`: `https://generativelanguage.googleapis.com/*` — вызовы Gemini API.

## Конфиденциальность

- Расширение отправляет в API только выделенный вами текст и получает обратно исправленную версию.
- Локально в `chrome.storage.sync` хранятся только счётчики (всего/успешно) и индекс текущего API-ключа.
- Ключи для API прописаны в коде расширения и используются исключительно для запроса исправления текста.

## Устранение неполадок

- Ничего не происходит при нажатии Ctrl+Shift+F:
	- Убедитесь, что текст действительно выделён.
	- Проверьте, что страница не `chrome://*` и не страница настроек Chrome.
	- Откройте `chrome://extensions/shortcuts` и проверьте, не занята ли комбинация — при необходимости поменяйте.
- Появляется уведомление об ошибке/нет результата:
	- Возможно, исчерпана квота текущего ключа — включится ротация. Попробуйте ещё раз или позже.
- Для диагностики откройте `chrome://extensions/` → включите «Режим разработчика» → «Просмотр в консоли» у расширения, и посмотрите логи `background`/`content`.

## Обновление/удаление

- Чтобы обновить, замените файлы в папке и нажмите «Обновить» (Refresh) на странице `chrome://extensions/`.
- Чтобы удалить, на странице `chrome://extensions/` нажмите «Удалить» у расширения.

## Лицензия

Использование на свой риск. Убедитесь, что правила сервиса Gemini и передаваемого контента вам подходят.